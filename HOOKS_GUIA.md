# üé£ Gu√≠a de Hooks de React - Proyecto DSY1104

**Proyecto:** Pasteler√≠a Web con React 19  
**Rama:** luisros  
**Fecha:** Octubre 2025

---

## üìã √çndice de Hooks Utilizados

1. [useState](#1-usestate---gesti√≥n-de-estado)
2. [useMemo](#2-usememo---optimizaci√≥n)
3. [useLoaderData](#3-useloaderdata---react-router)
4. [¬øPor qu√© NO usamos useEffect?](#por-qu√©-no-usamos-useeffect)

---

## 1. useState - Gesti√≥n de Estado

### üìç **Ubicaciones (5 usos totales)**

#### 1.1 ContactForm.jsx - Formulario de Contacto (3 estados)

**Archivo:** `src/components/root/ContactoComponents/ContactForm.jsx`

```javascript
import { useState } from 'react';

export default function ContactForm() {
    // ESTADO 1: Datos del formulario
    const [formData, setFormData] = useState({
        nombre: '',
        email: '',
        telefono: '',
        asunto: '',
        mensaje: ''
    });

    // ESTADO 2: Errores de validaci√≥n
    const [errors, setErrors] = useState({});

    // ESTADO 3: Mensaje de √©xito
    const [exito, setExito] = useState('');

    // Manejo de cambios en inputs
    const handleChange = (e) => {
        const { name, value } = e.target;
        setFormData({
            ...formData,
            [name]: value
        });
    };

    // Validaci√≥n y env√≠o
    const handleSubmit = (e) => {
        e.preventDefault();
        
        // Validar campos
        const nuevosErrores = {};
        
        if (!validarNombre(formData.nombre)) {
            nuevosErrores.nombre = 'Nombre inv√°lido';
        }
        
        if (Object.keys(nuevosErrores).length > 0) {
            setErrors(nuevosErrores);
            return;
        }
        
        // √âxito
        setExito('¬°Mensaje enviado correctamente!');
        setFormData({ nombre: '', email: '', telefono: '', asunto: '', mensaje: '' });
        setErrors({});
    };
}
```

**Prop√≥sito:**
- ‚úÖ Almacenar datos del formulario mientras el usuario escribe
- ‚úÖ Mostrar errores de validaci√≥n en tiempo real
- ‚úÖ Mostrar mensaje de confirmaci√≥n al enviar

---

#### 1.2 TimelineSection.jsx - Timeline Interactivo (1 estado)

**Archivo:** `src/components/root/NosotrosComponents/TimelineSection.jsx`

```javascript
import { useState } from 'react';

export default function TimelineSection() {
    // Control de tarjeta activa en el timeline
    const [activeCard, setActiveCard] = useState(0);

    const timelineData = [
        { year: "1995", title: "Los Inicios", ... },
        { year: "2005", title: "Expansi√≥n", ... },
        { year: "2015", title: "Modernizaci√≥n", ... },
        { year: "2025", title: "Era Digital", ... }
    ];

    return (
        <div className="timeline-container">
            {timelineData.map((item, index) => (
                <div 
                    key={index}
                    className={`timeline-item ${index === activeCard ? 'active' : ''}`}
                    onMouseEnter={() => setActiveCard(index)}
                >
                    <h3>{item.year}</h3>
                    <p>{item.title}</p>
                </div>
            ))}
        </div>
    );
}
```

**Prop√≥sito:**
- ‚úÖ Controlar qu√© tarjeta est√° activa en el timeline (hover)
- ‚úÖ Aplicar estilos diferentes a la tarjeta seleccionada
- ‚úÖ Interactividad con hover del mouse

---

#### 1.3 Blog index.jsx - Filtro de Categor√≠as (1 estado)

**Archivo:** `src/pages/blog/index.jsx`

```javascript
import { useState, useMemo } from 'react';
import { useLoaderData } from 'react-router-dom';

export default function Blog() {
    const { articles, categories } = useLoaderData();
    
    // Estado del filtro de categor√≠a
    const [filtro, setFiltro] = useState('Todos');

    // Cambio de filtro
    const handleCategoryChange = (categoria) => {
        setFiltro(categoria);
    };

    return (
        <main className="blog-page">
            <CategoryFilter 
                categories={categories}
                activeCategory={filtro}
                onCategoryChange={handleCategoryChange}
            />
            
            {/* Mostrar art√≠culos filtrados */}
            <BlogGrid articles={articulosFiltrados} />
        </main>
    );
}
```

**Prop√≥sito:**
- ‚úÖ Almacenar la categor√≠a seleccionada
- ‚úÖ Filtrar art√≠culos seg√∫n la categor√≠a
- ‚úÖ Actualizar vista cuando cambia el filtro

---

## 2. useMemo - Optimizaci√≥n

### üìç **Ubicaci√≥n (1 uso)**

**Archivo:** `src/pages/blog/index.jsx`

```javascript
import { useState, useMemo } from 'react';
import { useLoaderData } from 'react-router-dom';

export default function Blog() {
    const { articles } = useLoaderData();
    const [filtro, setFiltro] = useState('Todos');

    // OPTIMIZACI√ìN: Memoriza el resultado del filtrado
    const allBlogPosts = useMemo(() => {
        if (filtro === 'Todos') {
            return articles;
        }
        return articles.filter(article => article.categoria === filtro);
    }, [filtro, articles]); // Solo recalcula si filtro o articles cambian

    return (
        <main className="blog-page">
            <BlogGrid articles={allBlogPosts} />
        </main>
    );
}
```

### ‚ùì **¬øPor qu√© usar useMemo aqu√≠?**

**Sin useMemo (ineficiente):**
```javascript
// Se ejecuta en CADA render, incluso si filtro no cambi√≥
const allBlogPosts = articles.filter(article => 
    filtro === 'Todos' ? true : article.categoria === filtro
);
```

**Con useMemo (eficiente):**
```javascript
// Solo se ejecuta cuando filtro o articles cambian
const allBlogPosts = useMemo(() => {
    // ... l√≥gica de filtrado
}, [filtro, articles]);
```

**Ventajas:**
- ‚úÖ Evita rec√°lculos innecesarios
- ‚úÖ Mejora el rendimiento
- ‚úÖ Solo filtra cuando cambia el filtro o los art√≠culos

---

## 3. useLoaderData - React Router

### üìç **Ubicaciones (2 usos)**

#### 3.1 Blog index.jsx - Lista de Art√≠culos

**Archivo:** `src/pages/blog/index.jsx`

```javascript
import { useLoaderData } from 'react-router-dom';

export default function Blog() {
    // Obtiene datos del blogLoader
    const { articles, categories } = useLoaderData();

    return (
        <main className="blog-page">
            <h1>Blog</h1>
            <p>Total de art√≠culos: {articles.length}</p>
            <BlogGrid articles={articles} />
        </main>
    );
}
```

**Loader asociado (src/loaders/index.js):**
```javascript
export const blogLoader = async () => {
    // Simula delay de red
    await new Promise(resolve => setTimeout(resolve, 500));
    
    return {
        articles: [...], // 12 art√≠culos
        categories: ['Todas', 'Recetas', 'Consejos', 'Eventos', 'T√©cnicas']
    };
};
```

**Configuraci√≥n en routes.jsx:**
```javascript
{
    path: 'blog',
    Component: Blog,
    loader: blogLoader  // React Router llama esto ANTES de renderizar
}
```

---

#### 3.2 Articulo.jsx - Art√≠culo Individual

**Archivo:** `src/pages/blog/articulo.jsx`

```javascript
import { useLoaderData } from 'react-router-dom';

export default function Articulo() {
    // Obtiene datos del articuloLoader
    const { article } = useLoaderData();

    return (
        <main className="articulo-page">
            <ArticleHeader article={article} />
            <ArticleImage article={article} />
            
            <div className="article-content">
                <p>{article.contenido}</p>
            </div>
        </main>
    );
}
```

**Loader asociado (src/loaders/index.js):**
```javascript
export const articuloLoader = async ({ params }) => {
    const { slug } = params;
    
    const article = articles.find(a => a.slug === slug);
    
    if (!article) {
        throw new Response("Art√≠culo no encontrado", { status: 404 });
    }
    
    return { article };
};
```

**Configuraci√≥n en routes.jsx:**
```javascript
{
    path: 'blog/:slug',
    Component: Articulo,
    loader: articuloLoader  // Recibe el par√°metro :slug
}
```

---

## ‚ùå ¬øPor qu√© NO usamos useEffect?

### üî¥ **Forma Tradicional (NO la usamos)**

```javascript
import { useState, useEffect } from 'react';

export default function Blog() {
    const [articles, setArticles] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    useEffect(() => {
        // Fetch despu√©s del render
        fetch('/api/articles')
            .then(res => res.json())
            .then(data => {
                setArticles(data);
                setLoading(false);
            })
            .catch(err => {
                setError(err.message);
                setLoading(false);
            });
    }, []); // Solo al montar

    if (loading) return <div>Cargando...</div>;
    if (error) return <div>Error: {error}</div>;
    
    return <div>{articles.map(...)}</div>;
}
```

**Problemas:**
- ‚ùå Requiere 3 estados (data, loading, error)
- ‚ùå Muestra spinner de carga
- ‚ùå Render inicial vac√≠o
- ‚ùå M√°s c√≥digo
- ‚ùå Experiencia de usuario pobre

---

### ‚úÖ **Nuestra Forma (React Router Loaders)**

```javascript
import { useLoaderData } from 'react-router-dom';

export default function Blog() {
    // Los datos YA est√°n cargados
    const { articles } = useLoaderData();
    
    // No hay loading state
    // No hay error state aqu√≠ (se maneja en ErrorBoundary)
    // Render inmediato con datos
    
    return <div>{articles.map(...)}</div>;
}
```

**Ventajas:**
- ‚úÖ Datos cargados ANTES del render
- ‚úÖ Sin estados de loading
- ‚úÖ C√≥digo m√°s limpio
- ‚úÖ Mejor experiencia de usuario
- ‚úÖ Manejo de errores centralizado

---

## üìä Comparaci√≥n: useEffect vs React Router Loaders

| Aspecto | useEffect | React Router Loaders |
|---------|-----------|---------------------|
| **Cu√°ndo carga** | Despu√©s del render | Antes del render |
| **Estados necesarios** | 3 (data, loading, error) | 0 |
| **C√≥digo** | ~20 l√≠neas | ~2 l√≠neas |
| **Loading UI** | Requiere spinner | No necesario |
| **Experiencia UX** | Intermitente | Suave |
| **Usado en proyecto** | ‚ùå No | ‚úÖ S√≠ |

---

## üéØ Resumen de Hooks del Proyecto

```
üì¶ Hooks Utilizados (3 tipos)

‚îú‚îÄ‚îÄ useState (5 usos)
‚îÇ   ‚îú‚îÄ‚îÄ ContactForm
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formData
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errors
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ exito
‚îÇ   ‚îú‚îÄ‚îÄ TimelineSection
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ activeCard
‚îÇ   ‚îî‚îÄ‚îÄ Blog
‚îÇ       ‚îî‚îÄ‚îÄ filtro
‚îÇ
‚îú‚îÄ‚îÄ useMemo (1 uso)
‚îÇ   ‚îî‚îÄ‚îÄ Blog
‚îÇ       ‚îî‚îÄ‚îÄ allBlogPosts (optimizaci√≥n de filtrado)
‚îÇ
‚îî‚îÄ‚îÄ useLoaderData (2 usos)
    ‚îú‚îÄ‚îÄ Blog (lista de art√≠culos)
    ‚îî‚îÄ‚îÄ Articulo (art√≠culo individual)
```

---

## üí° Buenas Pr√°cticas Aplicadas

1. **useState:**
   - ‚úÖ Nombres descriptivos (`formData`, `activeCard`)
   - ‚úÖ Estado inicial apropiado
   - ‚úÖ Actualizaciones inmutables

2. **useMemo:**
   - ‚úÖ Solo para operaciones costosas
   - ‚úÖ Dependencias correctas
   - ‚úÖ Mejora rendimiento real

3. **useLoaderData:**
   - ‚úÖ Reemplaza useEffect para datos
   - ‚úÖ C√≥digo m√°s limpio
   - ‚úÖ Mejor UX

4. **Evitar useEffect:**
   - ‚úÖ No necesario para carga de datos
   - ‚úÖ React Router Loaders es mejor
   - ‚úÖ Menos bugs potenciales

---

## üéì Conclusi√≥n

Este proyecto demuestra el uso moderno de hooks de React:
- **useState** para estado local interactivo
- **useMemo** para optimizaci√≥n selectiva
- **useLoaderData** en lugar de useEffect
- C√≥digo limpio y mantenible

**Resultado:** Aplicaci√≥n React moderna siguiendo las mejores pr√°cticas de 2025. üöÄ

---

*Documento generado: Octubre 2025*  
*Proyecto DSY1104 - React con Hooks Modernos*
